<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<script type="text/javascript">
function randomsort(a, b) {
return Math.random()>0.5 ? -1 : 1;//用Math.random()函数生成0~1之间的随机数与0.5比较，返回-1或1
}

 function random(min,max){
    return Math.floor(min+Math.random()*(max-min));
}//生成范围内随机数

function  genGameData()
{
var dataPool=new Array();
var poolSize=0;
for(i=0;i<640/80/2;i++)
{
for(j=0;j<960/60;j++)
{
var data=random(-4,9);
gameData[i][j]=data;
dataPool[poolSize++]=data;
}
}
poolSize--;
dataPool.sort(randomsort);
for(i=640/80/2;i<640/80;i++)
for(j=0;j<960/60;j++)
{
gameData[i][j]=dataPool[poolSize--];
}
}
</script>
<script type="text/javascript">
function startGame()
{
ctx.clearRect(0,0,960,640);
genGameData()
drawCanvas();
}

function drawCanvas()
{
for(x=0;x<640/80;x++)
for(y=0;y<960/60;y++)
{
var type=gameData[x][y];
if(type>=0)
ctx.drawImage(imgArray[type],y*60,x*80);
else 
continue;
}

}
</script>
</head>
<body> 
<div style="text-align:center;margin-right:auto;margin-left:auto;">
<button onclick="startGame()">开始游戏</button>
<div>
<div style="margin-left:auto;margin-right:auto">
<canvas id="myCanvas" width="960"  height="640"></canvas>
</div>
<script type="text/javascript">
var c=document.getElementById("myCanvas");
var ctx=c.getContext("2d");
var imgArray=new Array();
var gameData=new Array();
for(i=0;i<640/80;i++)
{
gameData[i]=new Array();
for(j=0;j<960/60;j++)
gameData[i][j]=-1;
}
//初始化游戏数据

for(i=1;i<=10;i++)
{
var img=new Image(); 
img.src=i+".jpg"; 
imgArray[i-1]=img;
}
</script>


</body>
</html>